<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>æ­£å¤ªäººç”Ÿæ¨¡æ‹Ÿå™¨</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #b3e5fc 0%, #f8bbd0 100%);
            min-height: 100vh;
            padding: 20px;
            color: #4a148c;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255,255,255,0.9);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #ff6b6b;
            text-align: center;
            text-shadow: 2px 2px 0px white;
        }
        .btn {
            background: #81d4fa;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            font-size: 16px;
        }
        .btn:hover {
            transform: scale(1.1);
            background: #4fc3f7;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .status {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 15px;
        }
        .event-log {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: #fff;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px dashed #81d4fa;
        }
        .age-display {
            font-size: 24px;
            color: #ff6b6b;
            text-align: center;
            margin: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¾ æ­£å¤ªäººç”Ÿæ¨¡æ‹Ÿå™¨ ğŸ­</h1>
        <div id="gameStart">
            <button class="btn" onclick="startGame()">å¼€å§‹æ–°äººç”Ÿ</button>
        </div>
        <div id="gameScreen" style="display:none;">
            <div class="status">
                <div>ä½“åŠ›: <span id="stamina">10</span> ğŸ’ª</div>
                <div>æ™ºåŠ›: <span id="intel">10</span> ğŸ§ </div>
                <div>é­…åŠ›: <span id="charm">10</span> âœ¨</div>
                <div>å…ƒæ°”: <span id="energy">10</span> ğŸŒŸ</div>
            </div>
            <div class="age-display">å¹´é¾„: <span id="age">0</span>å²</div>
            <div class="event-log" id="log"></div>
            <button class="btn" onclick="nextYear()">ä¸‹ä¸€å¹´ â”</button>
            <button class="btn" onclick="restart()">é‡æ–°å¼€å§‹ ğŸ”„</button>
        </div>
    </div>

    <script>
        let state = {
            age: 0,
            stamina: 10,
            intel: 10,
            charm: 10,
            energy: 10
        };

        const events = [
            {
                condition: s => Math.random() < 0.28, // å°†åç»“å±€å‡ ç‡è®¾ç½®ä¸º28%
                text: [
                    "è¢«å¤ºèˆèº«ä½“ï¼Œå¤±å»è‡ªæˆ‘",
                    "å˜æˆçš®ç‰©ï¼Œæ— æ³•åæŠ—",
                    "è¢«ä¸æ˜ç”Ÿç‰©å æ®èº«ä½“",
                    "è¢«ä»–äººæ§åˆ¶èº«ä½“ï¼Œå¤±å»è‡ªç”±",
                    "è¢«ä»–äººçš„èº«ä½“æ‰€æ›¿ä»£"
                ],
                effect: { charm: -5, intel: -5, stamina: -5, energy: -5 }
            },
            {
                condition: () => true,
                text: ["é‡åˆ°äº†å‹å–„çš„æ–°æœ‹å‹", "è·å¾—äº†ä¸€æœ¬æ–°ä¹¦ç±", "å®¶åº­èšä¼šä¸­éå¸¸å¼€å¿ƒ"],
                effect: { charm: 1, energy: 1 }
            },
            {
                condition: s => s.age > 3,
                text: ["åœ¨å­¦æ ¡ç»„å»ºä¹é˜Ÿå¹¶è·å¾—è®¤å¯", "å‚åŠ å­¦æ ¡çš„æˆå‰§è¡¨æ¼”"],
                effect: { charm: 2, energy: -1 }
            },
            {
                condition: s => s.energy > 8,
                text: ["å‚åŠ å¤ä»¤è¥ï¼Œç»“è¯†æ–°æœ‹å‹", "ç»„ç»‡äº†ä¸€æ¬¡å®¶åº­å‡ºæ¸¸"],
                effect: { stamina: 1, charm: 1 }
            },
            {
                condition: s => s.intel > 10,
                text: ["å‘è¡¨äº†ä¸€ç¯‡å°è®ºæ–‡", "å‚åŠ äº†ç§‘å­¦å®éªŒï¼Œæ”¶è·é¢‡ä¸°"],
                effect: { intel: 2 }
            },
            {
                condition: s => s.charm >= 15,
                text: ["è¢«é€‰ä¸ºå­¦æ ¡é£äº‘äººç‰©", "åœ¨ç­çº§ä¸­å¤‡å—æ¬¢è¿"],
                effect: { intel: 1, charm: 3 }
            },
            {
                condition: s => s.age > 15,
                text: ["æˆä¸ºå­¦æ ¡ç¤¾å›¢çš„è´Ÿè´£äºº", "æ‹¥æœ‰è‡ªå·±çš„å°åº—é“º"],
                effect: { charm: 2, energy: -1 }
            },
            {
                condition: () => true,
                text: ["æ„å¤–æ”¶è·äº†ä¸€ä»½å°ç¤¼ç‰©", "é‡è§äº†ä¹…è¿çš„æœ‹å‹"],
                effect: { stamina: 1 }
            },
            {
                condition: s => s.stamina > 12,
                text: ["å‚åŠ å­¦æ ¡çš„è¿åŠ¨ä¼šå¹¶å–å¾—å¥½æˆç»©", "åœ¨ç¤¾åŒºæ´»åŠ¨ä¸­è¡¨ç°å‡ºè‰²"],
                effect: { stamina: 3, energy: -1 }
            },
            {
                condition: s => s.intel <= 5,
                text: ["å—åˆ°äº†è€å¸ˆçš„æ‰¹è¯„", "åœ¨è¯¾åè¾…å¯¼ä¸­é‡åˆ°å›°éš¾"],
                effect: { intel: -2 }
            },
            {
                condition: s => s.age > 10 && s.energy > 5,
                text: ["å’Œæœ‹å‹ä¸€èµ·å‚åŠ äº†è¿œè¶³", "å‚ä¸äº†æš‘æœŸå¤ä»¤è¥çš„æ´»åŠ¨"],
                effect: { energy: 1, charm: 1 }
            },
            {
                condition: s => s.charm < 5,
                text: ["åœ¨ç¤¾äº¤ä¸­é‡åˆ°æŒ«æŠ˜", "åœ¨ç­çº§æ´»åŠ¨ä¸­ä¸è¢«é‡è§†"],
                effect: { charm: -2 }
            },
            {
                condition: s => s.age > 12 && s.intel > 12,
                text: ["è·å¾—äº†å­¦æœ¯ç«äº‰çš„è®¤å¯", "å‚ä¸ç§‘å­¦ç¤¾åŒºçš„é¡¹ç›®"],
                effect: { intel: 2, charm: 1 }
            },
            {
                condition: s => s.age > 8 && s.energy < 4,
                text: ["å› ä¸ºä½“åŠ›ä¸è¶³è€Œè¢«æ’é™¤åœ¨æ´»åŠ¨å¤–", "å› ç¼ºä¹é”»ç‚¼è€Œæ„Ÿåˆ°ç–²æƒ«"],
                effect: { stamina: -2, energy: -1 }
            }
            // å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šçš„äº‹ä»¶
        ];

        function startGame() {
            document.getElementById("gameStart").style.display = "none";
            document.getElementById("gameScreen").style.display = "block";
            addLog("âœ¨ èŒèŒæ­£å¤ªè¯ç”Ÿï¼");
        }

        function nextYear() {
            state.age++;
            if (state.age >= 12) return endGame();

            updateStatus();
            triggerEvent();
            document.getElementById("age").textContent = state.age;
        }

        function updateStatus() {
            Object.entries(state).forEach(([key, value]) => {
                document.getElementById(key).textContent = value;
            });
        }

        function triggerEvent() {
            const validEvents = events.filter(e => e.condition(state));
            if (validEvents.length > 0) {
                const randomEvent = validEvents[Math.floor(Math.random() * validEvents.length)];
                const eventText = randomEvent.text[Math.floor(Math.random() * randomEvent.text.length)];

                addLog(`ğŸˆ ${state.age}å²: ${eventText}`);
                applyEffect(randomEvent.effect);
            } else {
                addLog(`ğŸˆ ${state.age}å²: æ²¡æœ‰å‘ç”Ÿäº‹ä»¶ã€‚`);
            }
        }

        function applyEffect(effect) {
            Object.entries(effect).forEach(([key, value]) => {
                state[key] = Math.max(0, state[key] + value);
                document.getElementById(key).textContent = state[key];
            });
        }

        function addLog(text) {
            const log = document.getElementById("log");
            log.innerHTML += `<div>${text}</div>`;
            log.scrollTop = log.scrollHeight;
        }

        function endGame() {
            let ending = "æ™®é€šåœ°é•¿å¤§äº†";
            if (state.charm > 20) ending = "æˆä¸ºå›½æ°‘çº§å¶åƒæ­£å¤ªï¼";
            if (state.intel > 20) ending = "æˆä¸ºå¤©æ‰å°‘å¹´ç§‘å­¦å®¶ï¼";
            if (state.stamina > 20) ending = "æˆé•¿ä¸ºè¿åŠ¨ç³»è¶…çº§æ–°æ˜Ÿï¼";
            if (state.charm < 5) ending = "æ²¡æœ‰äººè®°å¾—ä½ çš„åå­—...";
            if (state.intel < 5) ending = "é€æ¸æ²‰é»˜åœ¨å¹³åº¸ä¸­...";
            if (state.stamina < 5) ending = "ä¹Ÿè®¸è¯¥å¼€å§‹è¿åŠ¨äº†...";
            if (state.charm < 0 || state.intel < 0 || state.stamina < 0 || state.energy < 0) {
                ending = "è¢«å¤ºèˆèº«ä½“ï¼Œå¤±å»äº†è‡ªæˆ‘";
            }

            addLog(`ğŸ‰ ç»“å±€ï¼š${ending}`);
            setTimeout(restart, 2000);
        }

        function restart() {
            state = { age: 0, stamina: 10, intel: 10, charm: 10, energy: 10 };
            document.getElementById("log").innerHTML = "";
            updateStatus();
            document.getElementById("age").textContent = 0;
            startGame();
        }
    </script>
</body>
</html>
